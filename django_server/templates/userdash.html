<!DOCTYPE html>
<html lang="en">
{% load static %} {% static "assets/food_images" as food_image%}

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Restaurantly Bootstrap Template - Index</title>
    <meta content="" name="description">
    <meta content="" name="keywords">


    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <!-- Favicons -->
    <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
    <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">
    <link href="{% static 'assets/vendor/animate.css/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">

    <!-- =======================================================
  * Template Name: Restaurantly - v3.7.0
  * Template URL: https://bootstrapmade.com/restaurantly-restaurant-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body onload="deleteCookie('cart'); deleteCookie('selectedShop'); deleteCookie('cartMap')">

    <!-- ======= Top Bar ======= -->
    <div id="topbar" class="d-flex align-items-center fixed-top">
        <div class="container d-flex justify-content-center justify-content-md-between">




        </div>
    </div>

    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top d-flex align-items-cente">
        <div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">

            <h1 class="logo me-auto me-lg-0"><a href="">FASTFOOD</a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="index.html" class="logo me-auto me-lg-0"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

            <nav id="navbar" class="navbar order-last order-lg-0">
                <ul>
                    <li>
                        <form action="" method="post">
                            <input type="search" name="search" placeholder="Search here">
                            <input type="button" style="box-shadow: inset;" value="Search">
                        </form>
                    </li>
                    <pre>                                    </pre>
                    <li><a class="nav-link scrollto" href="userdash.html">Home</a></li>
                    <li><a href="#"><span>Contact</span> <i></i></a></li>
                    <li>
                    <li><a href="cart.html"><span>My Cart</span> <i></i></a></li>
                    <pre> </pre>
                    </li>
                    <li>
                        <ul>
                            <li class="dropdown"><a href="#"><span>My Account</span> <i
                                        class="bi bi-chevron-right"></i></a>
                                <ul>
                                    <li><a href="profile.html">My profile</a></li>
                                    <li><a href="#">My Orders</a></li>
                                    <li><a href="logout"><button class="book-a-table-btn scrollto d-none d-lg-flex"
                                                style="background-color: rgb(13, 13, 21);">LOGOUT</button></a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav>
            <!-- .navbar -->
            <ul>

            </ul>

        </div>
    </header>
    <!-- End Header -->

    </header>
    <!-- End Header -->
    <br>
    <br>
    <br>
    <br>


    <main id="main">

        <!-- ======= top selling ======= -->
        <section id="Top-selling" class="why-us">
            <div class="container">

                <div class="section-title">
                    <h2></h2>
                    <p>TOP SELLING ITEMS</p>
                </div>

                <div class="row">
                    {% for item in foodItems%}
                    <div class="col-lg-4">
                        <div class="box">
                            <img src="{{food_image}}/{{item.image_url}}" height="300" width="300" class="menu-img">
                            <h6>{{ item.name }}</h6>
                            <h6>{{ item.shop.shop_name }}</h6>
                            <h6>{{ item.price }}</h6>
                            <!-- <form action="addToCart('{{ item.item_id }}')" method="post">
                                {% csrf_token %}
                                <input hidden="true" name="item" value="{{ item.item_id }}">
                                <input type="submit" title="Add to cart">
                            </form> -->
                            <input type="button" id="addtocart" onclick="addToCart('{{ item.item_id }}', '{{ item.shop.shop_id }}')"
                                value="Add to Cart">
                            <p></p>
                        </div>
                    </div>
                    {% endfor %}

                    <script>
                        function addToCart(itm, shopId) {
                            //add itm to window.Cookies.cart
                            if (readCookie('selectedShop') == "" || readCookie('selectedShop') == shopId) {
                                saveCookie(shopId)
                                var cart = readCookie("cart")
                                if (cart == "") {
                                    let arr = []
                                    var json_str = JSON.stringify(arr);
                                    document.cookie = "cart=" + json_str;
                                }
                                var json_str = readCookie('cart');
                                var cart = JSON.parse(json_str);
                                cart.push(itm)
                                var json_str = JSON.stringify(cart);
                                document.cookie = "cart=" + json_str;
                                console.log(cart)
                            }
                            else if (readCookie('selectedShop') != shopId) {
                                window.alert("Select items from only one shop. Refresh page to change selected shop");
                            }
                        }
                        function saveCookie(shopName) {
                            document.cookie = "selectedShop=" + shopName
                        }
                        function readCookie(cname) {
                            let name = cname + "=";
                            let decodedCookie = decodeURIComponent(document.cookie);
                            let ca = decodedCookie.split(';');
                            for (let i = 0; i < ca.length; i++) {
                                let c = ca[i];
                                while (c.charAt(0) == ' ') {
                                    c = c.substring(1);
                                }
                                if (c.indexOf(name) == 0) {
                                    return c.substring(name.length, c.length);
                                }
                            }
                            return "";
                        }
                        function deleteCookie(name) {
                            document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                        }
                    </script>



                </div>

            </div>
        </section>
        <!-- top selling Section -->

    </main>
    <!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-3 col-md-6">
                        <div class="footer-info">
                            <h3>FASTFOOD</h3>
                            <p>
                                Christ University Central Campus <br> Bengaluru
                                <br><br>
                                <strong>Phone:</strong> +91 9188578700<br>
                                <strong>Email:</strong> info@example.com<br>
                                <a href="">Contact US</a>
                            </p>
                            <div class="social-links mt-3">
                                <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                                <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                                <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                                <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                                <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>